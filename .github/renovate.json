{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":combinePatchMinorReleases",
    ":separateMultipleMajorReleases",
    "npm:unpublishSafe"
  ],
  "enabledManagers": ["github-actions", "bun", "npm", "custom.regex"],
  "minimumReleaseAge": "3 days",
  "customManagers": [
    {
      "customType": "regex",
      "datasourceTemplate": "npm",
      "depTypeTemplate": "packageManager",
      "fileMatch": ["(^|/)package\\.json$"],
      "matchStrings": [
        "packageManager\"\\:\\s*\"(?<depName>.*?)\\@(?<currentValue>.*)\""
      ],
      "versioningTemplate": "npm"
    },
    {
      "customType": "regex",
      "datasourceTemplate": "npm",
      "depNameTemplate": "bun",
      "depTypeTemplate": "action",
      "fileMatch": [
        "(^|/)(workflow-templates|\\.(?:github|gitea|forgejo)/(?:workflows|actions))/.+\\.ya?ml$",
        "(^|/)action\\.ya?ml$"
      ],
      "matchStrings": ["bun-version\\:\\s*(?<currentValue>.*)\\s"],
      "versioningTemplate": "npm"
    }
  ],
  "packageRules": [
    {
      "groupName": "definitelyTyped",
      "matchPackagePrefixes": ["@types/"]
    },
    {
      "description": "Use ci semantic type for some deps",
      "matchFileNames": [".github/workflows/**"],
      "semanticCommitType": "ci"
    },
    {
      "description": "Update the Renovate GitHub action weekly with fix type",
      "extends": [":semanticCommitType(fix)", "schedule:weekly"],
      "matchPackageNames": "renovatebot/github-action",
      "semanticCommitType": "ci"
    }
  ],
  "postUpgradeTasks": {
    "commands": [
      "echo $PATH",
      "ls -la /home",
      "ls -la /home/runner/.bun/bin/bun",
      "/home/runner/.bun/bin/bun --revision",
      "bun run syncpack",
      "bun run syncpack:format",
      "bun run biome:apply"
    ]
  },
  "updateInternalDeps": true
}
